<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LINE 聊天模擬器 - LINE 智能記帳與提醒助手</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/simulator.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="logo">
            <img src="{{ url_for('static', filename='images/logo.png') }}" alt="LINE 智能記帳與提醒助手">
            <h1>LINE 聊天模擬器</h1>
        </div>
        <div class="nav">
            <a href="{{ url_for('index') }}">首頁</a>
            <a href="{{ url_for('line_simulator_page') }}" class="active">LINE 模擬器</a>
            <a href="{{ url_for('pwa_preview') }}">PWA 預覽</a>
        </div>
    </header>

    <main class="line-simulator">
        <div class="simulator-controls">
            <div class="user-info">
                <h3>用戶資訊</h3>
                <div class="form-group">
                    <label for="user-id">用戶 ID:</label>
                    <input type="text" id="user-id" value="test_user_id">
                </div>
                <div class="form-group">
                    <label for="user-name">用戶名稱:</label>
                    <input type="text" id="user-name" value="測試用戶">
                </div>
                <div class="form-group">
                    <label for="language">語言:</label>
                    <select id="language">
                        <option value="zh-TW" selected>繁體中文 (Taiwan)</option>
                        <option value="zh-CN">簡體中文 (China)</option>
                        <option value="en">English</option>
                    </select>
                </div>
                <button id="clear-chat" class="btn">清除聊天記錄</button>
                <button id="save-chat" class="btn">儲存聊天記錄</button>
            </div>

            <div class="template-messages">
                <h3>測試訊息模板</h3>
                <div class="template-list">
                    <button class="template-btn" data-message="記帳 100 午餐">記帳: 午餐 100元</button>
                    <button class="template-btn" data-message="今天午餐花了 80 元">自然語言記帳</button>
                    <button class="template-btn" data-message="明天早上 9 點提醒我開會">設置提醒</button>
                    <button class="template-btn" data-message="查詢本月支出">查詢: 本月支出</button>
                    <button class="template-btn" data-message="新增帳戶 現金">新增帳戶</button>
                    <button class="template-btn" data-message="查看我的提醒">查看提醒</button>
                </div>
                <div class="custom-template">
                    <input type="text" id="custom-message" placeholder="自訂訊息內容">
                    <button id="add-template" class="btn">新增模板</button>
                </div>
            </div>
        </div>

        <div class="line-chat-simulator">
            <div class="line-header">
                <div class="line-profile">
                    <img src="{{ url_for('static', filename='images/bot-avatar.png') }}" alt="Bot">
                    <span>智能記帳與提醒助手</span>
                </div>
            </div>

            <div id="chat-container" class="chat-container">
                <!-- 聊天訊息將顯示在這裡 -->
                <div class="bot-message">
                    <div class="message-content">
                        你好！我是你的智能記帳與提醒助手。請告訴我你想做什麼？
                        <br>- 記帳
                        <br>- 設置提醒
                        <br>- 查詢資料
                    </div>
                </div>
            </div>

            <div class="line-input">
                <input type="text" id="message-input" placeholder="輸入訊息...">
                <button id="send-button"><i class="fas fa-paper-plane"></i></button>
            </div>
            
            <div class="line-quickmenu">
                <button class="quick-btn" data-action="menu">功能選單</button>
                <button class="quick-btn" data-action="accounting">記帳</button>
                <button class="quick-btn" data-action="reminder">提醒</button>
                <button class="quick-btn" data-action="query">查詢</button>
            </div>
        </div>

        <div class="response-details">
            <h3>回應詳情</h3>
            <div class="tabs">
                <button class="tab-btn active" data-tab="json">JSON</button>
                <button class="tab-btn" data-tab="logs">日誌</button>
                <button class="tab-btn" data-tab="debug">除錯</button>
            </div>
            <div class="tab-content active" id="json-content">
                <pre id="response-json">尚未收到回應</pre>
            </div>
            <div class="tab-content" id="logs-content">
                <div id="log-messages">尚未產生日誌</div>
            </div>
            <div class="tab-content" id="debug-content">
                <div class="debug-tools">
                    <button id="test-flex" class="btn">測試 Flex 渲染</button>
                    <button id="test-api" class="btn">測試 API 連接</button>
                    <button id="reload-bot" class="btn">重新載入 Bot</button>
                </div>
                <pre id="debug-output">除錯資訊將顯示在這裡</pre>
            </div>
        </div>
    </main>

    <div id="flex-preview-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Flex Message 預覽</h2>
            <div id="flex-preview-container"></div>
        </div>
    </div>

    <footer>
        <p>&copy; 2024 LINE 智能記帳與提醒助手 - 模擬環境</p>
    </footer>

    <script src="{{ url_for('static', filename='js/line_simulator.js') }}"></script>
</body>
</html> 